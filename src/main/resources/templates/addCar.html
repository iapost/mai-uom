<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<html>
	<head>
		<head>
			<link th:href="@{/create-view-update.css}" rel="stylesheet">
			<!--<link rel="stylesheet" href="C:\Users\Tasos\eclipse-workspace\mai-uom\src\main\resources\static\create-view-update.css">-->
		</head>
	</head>
	<body>

		<div class="header">
			<button id ="logoutBtn" name='logoutButton' onclick="logout();"> Αποσύνδεση </button>
		</div>

		</br>
		<h1> Προσθήκη Αυτοκινήτου</h1>
		<div class="main">
			<div class="form">
				<table>
					<tr>
						<td> Μάρκα: </td>
						<td> <input type='text' id='brand'> </td>
					</tr>
					<tr>
						<td> Μοντέλο: </td>
						<td> <input type='text' id='model'> </td>
					</tr>
					<tr>
						<td> Κινητήρας: </td>
						<td> <input type='number' id='engine'> </td>
					</tr>
					<tr>
						<td> Καύσιμο: </td>
						<td> <input type='text' id='fuel'> </td>
					</tr>
					<tr>
						<td> Θέσεις: </td>
						<td> <input type='number' id='seats'> </td>
					</tr>
					<tr>
						<td> Πληροφορίες: </td>
						<td> <input type='text' id='info'> </td>
					</tr>
					<tr>
						<td> Τιμή: </td>
						<td> <input type='number' id='price'> </td>
					</tr>
					<tr>
						<td> Ποσότητα : </td>
						<td> <input type='number' id='amount'> </td>
					</tr>
				</table>
			</div>
			<div class="btnContainer">
				<button class ="btn" name='create' onclick="addCar();">Προσθήκη</button>
				<button class ="btn" onclick="back();">Πίσω</button>
			</div>
			</div>
			<div class="footer"></div>
		<script>
			const token = new URLSearchParams(window.location.search).get('token');
		
			function addCar() {				
				var settings = {
					"url": "/dealership/addCar?token=" + token,
					"method": "POST",
					"timeout": 0,
					"headers": {
					"Content-Type": "application/json"},
					"data": JSON.stringify({
						"brand": document.getElementById("brand").value,
                        "model": document.getElementById("model").value,
						"engine": document.getElementById("engine").value,
                        "fuel": document.getElementById("fuel").value,
                        "seats": document.getElementById("seats").value,
                        "info": document.getElementById("info").value,
                        "price": document.getElementById("price").value,
                        "amount": document.getElementById("amount").value
				  }),
				};
				$.ajax(settings).done(function (response) {
					sessionStorage.setItem("success", "Το αυτοκίνητο προστέθηκε!");
					window.location.href = "/ui/dealershipHomePage?token=" + token;
				});
			}

			function logout() {
			var settings = {
				"url": "/logout?token=" + token,
				"method": "GET",
				"timeout": 0
			};
			$.ajax(settings).done(function (response) {
				window.location.href = '/ui/login';
			});
		}

			function back(){
				window.location.href = '/ui/dealershipHomePage?token=' + token;
			}
		</script>	
	</body>
</html>