<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<html>
	<head>
	</head>
	<body>


		<h1> Επιλεγμένο Αυτοκίνητο</h1>


		<table>
			<tr>
				<td> Μάρκα: </td>
				<td id ="brand"></td>
			</tr>
            <tr>
				<td> Μοντέλο: </td>
				<td id="model"></td>
			</tr>
            <tr>
				<td> Κινητήρας: </td>
				<td id="engine"> </td>
			</tr>
            <tr>
				<td> Καύσιμο: </td>
				<td id="fuel"> </td>
			</tr>
            <tr>
				<td> Θέσεις: </td>
				<td id="seats"> </td>
			</tr>
            <tr>
				<td> Πληροφορίες: </td>
				<td id="info"> </td>
			</tr>
            <tr>
				<td> Τιμή: </td>
				<td id="price"> </td>
			</tr>
            <tr>
				<td> Ποσότητα : </td>
				<td id="amount"> </td>
			</tr>

		</table>
		<p id="carId" style="display:none"></p>
		<br><br>
		<button onclick="buyCar();">Αγορά</button>
		<button onclick="bookTest();">Κράτηση TestDrive</button>

		<script>

			document.addEventListener('DOMContentLoaded', function(){
				var car = JSON.parse(localStorage.getItem('selectedCar'));
				if(car){
					document.getElementById('carId').innerHTML = car.id;
					document.getElementById('brand').innerHTML = car.brand;
					document.getElementById('model').innerHTML = car.model;
					document.getElementById('fuel').innerHTML = car.fuel;
					document.getElementById('engine').innerHTML = car.engine;
					document.getElementById('seats').innerHTML = car.seats;
					document.getElementById('info').innerHTML = car.info;
					document.getElementById('price').innerHTML = car.price;
					document.getElementById('amount').innerHTML = car.amount;
				}
			})
		
			function buyCar() {
				var settings = {
					"url": "/client/buyCar",
					"method": "POST",
					"timeout": 0,
					"headers": {
					"Content-Type": "application/json"
				  },
				  "data": JSON.stringify({
					"id" : document.getElementById("carId").innerHTML,
					"brand" : document.getElementById("brand").innerHTML,
					"model" : document.getElementById("model").innerHTML,
					"fuel" : document.getElementById("fuel").innerHTML, 
					"engine" : document.getElementById("engine").innerHTML,
					"seats" : document.getElementById("seats").innerHTML,
					"info" : document.getElementById("info").innerHTML, 
					"price" : document.getElementById("price").innerHTML,
					"amount" : document.getElementById("amount").innerHTML
				  }),
				};
					
				
				$.ajax(settings).done(function (response) {
					console.log("ok bought the car ");
					window.location.href = '/ui/clientHomePage';
				});
			};

		</script>	
	</body>
</html>